<!DOCTYPE html>
<html lang="en" class="scroll-smooth">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Module 4: CLI workflows | Advanced prompt engineering</title>
    <link href="https://fonts.googleapis.com/css2?family=Fraunces:ital,opsz,wght@0,9..144,300;0,9..144,400;0,9..144,700;1,9..144,300;1,9..144,400&family=Inter:wght@400;500;600;700&family=JetBrains+Mono:wght@400;500&display=swap" rel="stylesheet">
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="../assets/js/config.js"></script>
    <link rel="stylesheet" href="../assets/css/amditis.css">
    <link rel="icon" type="image/svg+xml" href="../assets/favicon.svg" />
    <script src="https://unpkg.com/lucide@latest"></script>
</head>
<body class="antialiased font-sans bg-void text-chrome">
    <a href="#main" class="skip-link">Skip to main content</a>

    <div class="relative z-10 flex min-h-screen flex-col">
        <!-- Header with nav -->
        <header class="border-b border-white/10 bg-panel/50 backdrop-blur-md sticky top-0 z-50">
            <div class="max-w-5xl mx-auto px-6 py-4 flex justify-between items-center">
                <a href="../" class="flex items-center gap-3">
                    <div class="w-8 h-8 bg-acid text-void flex items-center justify-center font-bold font-display text-xl rounded-lg">P</div>
                    <span class="font-display font-bold text-sm tracking-wider text-chrome">PROMPT_ENG</span>
                </a>
                <nav aria-label="Module navigation" class="hidden md:flex gap-4 text-xs font-mono">
                    <a href="../module-1/" class="text-gray-400 hover:text-ice transition-colors">[ 01 ]</a>
                    <a href="../module-2/" class="text-gray-400 hover:text-ice transition-colors">[ 02 ]</a>
                    <a href="../module-3/" class="text-gray-400 hover:text-ice transition-colors">[ 03 ]</a>
                    <a href="../module-4/" class="text-acid">[ 04 ]</a>
                    <a href="../module-5/" class="text-gray-400 hover:text-ice transition-colors">[ 05 ]</a>
                </nav>
            </div>
        </header>

        <!-- Module header -->
        <section class="py-12 px-6 border-b border-white/10">
            <div class="max-w-5xl mx-auto">
                <div class="text-xs text-acid font-mono mb-4">MODULE 04</div>
                <h1 class="font-display text-4xl md:text-5xl font-bold text-white">CLI WORKFLOWS</h1>
                <p class="text-gray-300 text-lg font-sans mt-4 max-w-2xl">Chain commands together, pipe data between tools, and automate repetitive tasks with shell scripts.</p>
            </div>
        </section>

        <!-- Content sections -->
        <main id="main" class="flex-1 max-w-5xl mx-auto w-full px-6 py-12 space-y-16">

            <!-- Learning objectives -->
            <section>
                <div class="border-b border-white/10 pb-4 mb-6">
                    <h2 class="font-display text-xl text-ice">Learning objectives</h2>
                </div>
                <div class="border border-ice/30 bg-iceDim p-6">
                    <ul class="space-y-2 text-sm font-sans text-gray-300">
                        <li class="flex items-start gap-3"><span class="text-ice">></span> Understand Unix pipes and how to chain commands</li>
                        <li class="flex items-start gap-3"><span class="text-ice">></span> Use Claude Code in non-interactive mode for scripting</li>
                        <li class="flex items-start gap-3"><span class="text-ice">></span> Build shell scripts that automate multi-step workflows</li>
                        <li class="flex items-start gap-3"><span class="text-ice">></span> Create a practical content pipeline for journalism work</li>
                    </ul>
                </div>
            </section>

            <!-- Before you start -->
            <section>
                <div class="border-b border-white/10 pb-4 mb-6">
                    <h2 class="font-display text-xl text-chrome">Before you start</h2>
                </div>
                <div class="space-y-4">
                    <p class="text-gray-300 text-sm leading-relaxed">This module is about building automated pipelines — scripts that run a sequence of AI tasks without you manually intervening. To use them well, it helps to understand what's actually happening inside an AI session: how context is stored, why order matters, and what "caching" means for how quickly your pipeline runs.</p>
                    <a href="../concepts/how-ai-session-memory-works.html" class="inline-flex items-center gap-2 text-ice text-sm hover:text-acid transition-colors">
                        Read the full explanation: how AI session memory works →
                    </a>
                </div>
            </section>

            <!-- Key concepts -->
            <section>
                <div class="border-b border-white/10 pb-4 mb-6">
                    <h2 class="font-display text-xl text-chrome">Key concepts</h2>
                </div>
                <div class="space-y-4">
                    <div class="border border-white/10 bg-panel p-6">
                        <h3 class="font-display text-lg text-acid mb-3">Pipes and redirection</h3>
                        <p class="text-gray-300 text-sm leading-relaxed mb-4">The pipe character (<code class="text-acid bg-surface px-1">|</code>) sends the output of one command as input to another. This lets you build processing chains:</p>
                        <div class="border border-white/10 bg-surface overflow-hidden mb-4">
                            <pre class="p-4 text-sm overflow-x-auto"><code class="text-acid">cat article.txt | wc -w    <span class="text-gray-400"># Count words in article</span>
ls *.txt | wc -l           <span class="text-gray-400"># Count text files</span></code></pre>
                        </div>
                        <p class="text-gray-300 text-sm leading-relaxed">Redirection (<code class="text-acid bg-surface px-1">></code> and <code class="text-acid bg-surface px-1">>></code>) sends output to files instead of the screen. <code class="text-acid bg-surface px-1">></code> overwrites, <code class="text-acid bg-surface px-1">>></code> appends.</p>
                    </div>

                    <div class="border border-white/10 bg-panel p-6">
                        <h3 class="font-display text-lg text-acid mb-3">Non-interactive mode</h3>
                        <p class="text-gray-300 text-sm leading-relaxed mb-4">Claude Code can run as a single command without entering the interactive REPL. This is essential for scripting:</p>
                        <div class="border border-white/10 bg-surface overflow-hidden">
                            <pre class="p-4 text-sm overflow-x-auto"><code class="text-gray-300"><span class="text-gray-400"># Interactive (starts a session)</span>
<span class="text-acid">claude</span>

<span class="text-gray-400"># Non-interactive (runs once and exits)</span>
<span class="text-acid">claude -p "Summarize this article" < article.txt</span></code></pre>
                        </div>
                        <p class="text-gray-400 text-xs mt-2">The <code class="text-acid bg-surface px-1">-p</code> flag specifies the prompt. Input can come from a file or piped from another command.</p>
                    </div>

                    <div class="border border-white/10 bg-panel p-6">
                        <h3 class="font-display text-lg text-acid mb-3">Shell scripts</h3>
                        <p class="text-gray-300 text-sm leading-relaxed">A shell script is a text file containing commands that run in sequence. Scripts let you save and reuse workflows. On macOS and Linux, scripts typically start with <code class="text-acid bg-surface px-1">#!/bin/bash</code> and need execute permission (<code class="text-acid bg-surface px-1">chmod +x script.sh</code>).</p>
                    </div>

                    <div class="border border-white/10 bg-panel p-6">
                        <h3 class="font-display text-lg text-acid mb-3">Variables and loops</h3>
                        <p class="text-gray-300 text-sm leading-relaxed mb-4">Shell scripts can use variables and loops to process multiple files:</p>
                        <div class="border border-white/10 bg-surface overflow-hidden">
                            <pre class="p-4 text-sm overflow-x-auto"><code class="text-acid">for file in *.txt; do
  echo "Processing $file"
  claude -p "Summarize" < "$file" > "${file%.txt}-summary.txt"
done</code></pre>
                        </div>
                        <p class="text-gray-400 text-xs mt-2">This loop processes every <code class="text-acid bg-surface px-1">.txt</code> file and creates a summary for each.</p>
                    </div>
                </div>
            </section>

            <!-- Exercise -->
            <section>
                <div class="border-b border-white/10 pb-4 mb-6">
                    <h2 class="font-display text-xl text-acid">EXERCISE</h2>
                </div>

                <div class="border border-acid/30 bg-acidDim p-6 mb-8">
                    <p class="text-sm font-sans"><span class="text-acid font-bold font-mono">GOAL:</span> <span class="text-gray-300">Ask Claude to build a newsletter pipeline that uses <code class="font-mono">claude -p</code> to process articles automatically — then explore what it built and why it works.</span></p>
                </div>

                <!-- Step 1 -->
                <div class="mb-8">
                    <h3 class="font-display text-lg text-chrome mb-4 flex items-center gap-3">
                        <span class="w-8 h-8 bg-acid text-void flex items-center justify-center font-bold text-sm">01</span>
                        Open Claude Code
                    </h3>
                    <p class="text-gray-300 text-sm mb-4">Open your terminal and launch a session:</p>
                    <div class="border border-white/10 bg-panel overflow-hidden">
                        <div class="bg-surface px-4 py-2 border-b border-white/10 flex items-center gap-2">
                            <div class="w-3 h-3 rounded-full bg-signal/50"></div>
                            <div class="w-3 h-3 rounded-full bg-acid/50"></div>
                            <div class="w-3 h-3 rounded-full bg-ice/50"></div>
                            <span class="text-xs text-gray-400 ml-2 font-mono">terminal</span>
                        </div>
                        <pre class="p-4 text-sm overflow-x-auto"><code class="text-acid">claude</code></pre>
                    </div>
                </div>

                <!-- Step 2 -->
                <div class="mb-8">
                    <h3 class="font-display text-lg text-chrome mb-4 flex items-center gap-3">
                        <span class="w-8 h-8 bg-acid text-void flex items-center justify-center font-bold text-sm">02</span>
                        Ask Claude to build the pipeline
                    </h3>
                    <p class="text-gray-300 text-sm mb-4">Paste this prompt inside the session:</p>
                    <div class="border border-white/10 bg-panel overflow-hidden">
                        <div class="bg-surface px-4 py-2 border-b border-white/10 flex items-center gap-2">
                            <div class="w-3 h-3 rounded-full bg-signal/50"></div>
                            <div class="w-3 h-3 rounded-full bg-acid/50"></div>
                            <div class="w-3 h-3 rounded-full bg-ice/50"></div>
                            <span class="text-xs text-gray-400 ml-2 font-mono">claude code</span>
                        </div>
                        <pre class="p-4 text-sm overflow-x-auto"><code class="text-gray-300">Create a newsletter pipeline in ~/newsletter-pipeline. I need:

1. Two realistic sample news articles as .txt files (fictional local news stories)
2. A shell script called process-newsletter.sh that uses "claude -p" (non-interactive mode) to process each .txt file: summarize it in 2-3 sentences, then format that summary as a simple HTML snippet with an h3 headline and paragraph. Save outputs to an output/ folder.
3. Make the script executable, run it on one article, and show me the output.</code></pre>
                    </div>
                    <p class="text-gray-400 text-xs mt-2">Watch what Claude does: it creates the folder structure, writes the sample articles, writes the script, and runs it. You delegated the whole thing.</p>
                </div>

                <!-- Step 3 -->
                <div class="mb-8">
                    <h3 class="font-display text-lg text-chrome mb-4 flex items-center gap-3">
                        <span class="w-8 h-8 bg-acid text-void flex items-center justify-center font-bold text-sm">03</span>
                        Ask Claude to explain what it built
                    </h3>
                    <p class="text-gray-300 text-sm mb-4">In the same session, ask Claude to explain the key concept:</p>
                    <div class="border border-white/10 bg-panel overflow-hidden">
                        <div class="bg-surface px-4 py-2 border-b border-white/10 flex items-center gap-2">
                            <div class="w-3 h-3 rounded-full bg-signal/50"></div>
                            <div class="w-3 h-3 rounded-full bg-acid/50"></div>
                            <div class="w-3 h-3 rounded-full bg-ice/50"></div>
                            <span class="text-xs text-gray-400 ml-2 font-mono">claude code</span>
                        </div>
                        <pre class="p-4 text-sm overflow-x-auto"><code class="text-gray-300">Walk me through the script line by line. Explain what "claude -p" does and how it's different from the interactive session we're using right now. What would happen if I added a third article to the folder and ran the script again?</code></pre>
                    </div>
                    <p class="text-gray-400 text-xs mt-2">This is the key concept of the module: <code class="text-acid bg-surface px-1">claude -p</code> is non-interactive mode — it runs once and exits, making it scriptable. Your interactive session is the opposite: persistent, conversational, context-aware.</p>
                </div>

                <!-- Step 4 -->
                <div class="mb-8">
                    <h3 class="font-display text-lg text-chrome mb-4 flex items-center gap-3">
                        <span class="w-8 h-8 bg-acid text-void flex items-center justify-center font-bold text-sm">04</span>
                        Process all articles
                    </h3>
                    <p class="text-gray-300 text-sm mb-4">Ask Claude to run the pipeline on both articles and show you the results:</p>
                    <div class="border border-white/10 bg-panel overflow-hidden">
                        <div class="bg-surface px-4 py-2 border-b border-white/10 flex items-center gap-2">
                            <div class="w-3 h-3 rounded-full bg-signal/50"></div>
                            <div class="w-3 h-3 rounded-full bg-acid/50"></div>
                            <div class="w-3 h-3 rounded-full bg-ice/50"></div>
                            <span class="text-xs text-gray-400 ml-2 font-mono">claude code</span>
                        </div>
                        <pre class="p-4 text-sm overflow-x-auto"><code class="text-gray-300">Run the pipeline on all the articles and show me each HTML output. Then tell me: what would need to change in the script if I wanted to use Gemini CLI instead of Claude?</code></pre>
                    </div>
                    <p class="text-gray-300 text-sm mt-4">The script Claude wrote is yours — save it, modify it, run it on real articles whenever you need. That's what "reusable workflow" means.</p>
                </div>
            </section>

            <!-- Checkpoint questions -->
            <section>
                <div class="border-b border-white/10 pb-4 mb-6">
                    <h2 class="font-display text-xl text-signal">Checkpoint</h2>
                </div>
                <div class="border border-signal/30 bg-signalDim p-6">
                    <p class="text-sm font-sans text-gray-300 mb-4"><span class="text-signal font-bold">Self-check:</span> Make sure you can answer these before moving on.</p>
                    <ul class="space-y-2 text-sm font-sans text-gray-300">
                        <li class="flex items-start gap-3"><span class="text-signal">?</span> What is <code class="text-acid bg-surface px-1">claude -p</code> and when would you use it instead of an interactive session?</li>
                        <li class="flex items-start gap-3"><span class="text-signal">?</span> What is the difference between the interactive mode you used in this exercise and the scripted mode the pipeline uses?</li>
                        <li class="flex items-start gap-3"><span class="text-signal">?</span> What kinds of journalism workflows are well-suited to an automated pipeline like this one?</li>
                        <li class="flex items-start gap-3"><span class="text-signal">?</span> Why does the script save outputs to files rather than just printing them to the terminal?</li>
                    </ul>
                </div>
            </section>

            <!-- Readings and resources -->
            <section>
                <div class="border-b border-white/10 pb-4 mb-6">
                    <h2 class="font-display text-xl text-chrome">Resources</h2>
                </div>
                <div class="border border-white/10 bg-panel p-6">
                    <ul class="space-y-3 text-sm font-sans">
                        <li><a href="https://www.gnu.org/software/bash/manual/bash.html" target="_blank" rel="noopener" class="text-ice hover:text-acid transition-colors">[DOCS]</a> <span class="text-gray-300">Bash Reference Manual - Complete bash documentation</span></li>
                        <li><a href="https://missing.csail.mit.edu/2020/shell-tools/" target="_blank" rel="noopener" class="text-ice hover:text-acid transition-colors">[COURSE]</a> <span class="text-gray-300">The Missing Semester: Shell Tools - MIT's guide to shell scripting</span></li>
                        <li><a href="https://code.claude.com/docs" target="_blank" rel="noopener" class="text-ice hover:text-acid transition-colors">[REF]</a> <span class="text-gray-300">Claude Code documentation - Non-interactive mode reference</span></li>
                        <li><a href="https://explainshell.com/" target="_blank" rel="noopener" class="text-ice hover:text-acid transition-colors">[TOOL]</a> <span class="text-gray-300">ExplainShell - Paste any shell command to see what each part does</span></li>
                    </ul>
                </div>
            </section>

            <!-- Troubleshooting -->
            <section>
                <div class="border-b border-white/10 pb-4 mb-6">
                    <h2 class="font-display text-xl text-chrome">Troubleshooting</h2>
                </div>
                <div class="border border-white/10 bg-panel divide-y divide-white/5">
                    <div class="p-6">
                        <h4 class="font-mono text-sm text-signal mb-2">"Permission denied" when running the script</h4>
                        <p class="text-gray-400 text-sm">You need to make the script executable: <code class="text-acid bg-surface px-1">chmod +x newsletter-pipeline.sh</code></p>
                    </div>
                    <div class="p-6">
                        <h4 class="font-mono text-sm text-signal mb-2">"command not found: claude"</h4>
                        <p class="text-gray-400 text-sm">Claude Code isn't in your PATH. If you used the native installer (<code class="text-acid bg-surface px-1">curl -fsSL https://claude.ai/install.sh | sh</code>), restart your terminal. See <a href="https://code.claude.com/docs" target="_blank" rel="noopener" class="text-ice hover:text-acid transition-colors">code.claude.com/docs</a> for troubleshooting steps.</p>
                    </div>
                    <div class="p-6">
                        <h4 class="font-mono text-sm text-signal mb-2">Script produces empty output</h4>
                        <p class="text-gray-400 text-sm">Check that the input file exists and isn't empty. Add <code class="text-acid bg-surface px-1">set -e</code> at the top of your script to stop on errors, making problems easier to diagnose.</p>
                    </div>
                    <div class="p-6">
                        <h4 class="font-mono text-sm text-signal mb-2">Special characters in filenames cause errors</h4>
                        <p class="text-gray-400 text-sm">Always quote variable references in scripts: use <code class="text-acid bg-surface px-1">"$file"</code> not <code class="text-acid bg-surface px-1">$file</code>. This handles spaces and special characters correctly.</p>
                    </div>
                </div>
            </section>

        </main>

        <!-- Prev/Next navigation -->
        <footer class="border-t border-white/10 bg-panel">
            <div class="max-w-5xl mx-auto px-6 py-4 flex justify-between">
                <a href="../module-3/" class="text-gray-400 hover:text-white text-sm font-mono transition-colors">Module 03</a>
                <a href="../module-5/" class="text-acid hover:text-white text-sm font-mono transition-colors">Module 05</a>
            </div>
        </footer>
    </div>

    <script>lucide.createIcons();</script>
    <script src="../assets/js/copy-code.js"></script>
</body>
</html>
